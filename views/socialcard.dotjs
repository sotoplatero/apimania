<!doctype html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
    <script>

        const urlParams = new URLSearchParams(window.location.search);
        const text = urlParams.get('text');
        const size = urlParams.get('size') || '3rem';
        const color = urlParams.get('color') || '000';
        const bg = urlParams.get('bg') || 'fff';
        // const py = urlParams.get('py') || '1rem';
        // const px = urlParams.get('px') || '2rem';
        let font = urlParams.get('font') || 'arial';
        const format = urlParams.get('format') || 'auto';

        let height = (format === '16/9') ? '360px' : 
                        (format === '4/3') ? '480px' :
                            'auto';
        let width = format==='auto' ? 'auto' : '640px';

        if ( font !== 'arial' ) {
            let font = urlParams.get('font').replace(/(^\w{1})|(\s+\w{1})/g, le => le.toUpperCase()) 
            WebFont.load({
                google: { families: [ font ] }
            });
        }
        
        document.addEventListener('DOMContentLoaded', (event) => {


            textFormated = `
                <div 
                    id="txt2img"
                    style="
                        line-height: 1;
                        display: flex;
                        flex-direction: column;
                        justify-content: center;
                        font-family: ${ font }, sans-serif;
                        text-align: center;
                        max-width: 640px;
                        height: ${height};
                        width: ${width};
                        font-size:${size};
                        background-color:${bg};
                        color:${color};
                        padding:1rem 2rem;
                        overflow: hidden;
                ">
                    <p>${text}</p>
                </div>
            `
            document.querySelector('body').innerHTML = textFormated;
        })
    </script>         
</head>
    <body>
        <div 
            id="txt2img"
            style="
                line-height: 1;
                display: flex;
                flex-direction: column;
                justify-content: center;
                font-family: ${ font }, sans-serif;
                text-align: center;
                max-width: 640px;
                height: ${height};
                width: ${width};
                font-size:${size};
                background-color:${bg};
                color:${color};
                padding:1rem 2rem;
                overflow: hidden;
        ">
            <p>{{text}}</p>
        </div>        
    </body>
</html>